<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project name="Auth1.0" resourceRoot="" soapui-version="3.6.1" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.actions.iface.tools.soapui.TestRunnerAction@values-local"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Global Properties" value=""/>
  <con:entry key="TestSuite" value="&lt;all>"/>
  <con:entry key="Report to Generate" value=""/>
  <con:entry key="Password" value=""/>
  <con:entry key="soapui-setings.xml Password" value=""/>
  <con:entry key="TestRunner Path" value=""/>
  <con:entry key="Tool Args" value=""/>
  <con:entry key="Ignore Errors" value="false"/>
  <con:entry key="Host:Port" value=""/>
  <con:entry key="WSS Password Type" value=""/>
  <con:entry key="Save Project" value="false"/>
  <con:entry key="Enable UI" value="false"/>
  <con:entry key="System Properties" value=""/>
  <con:entry key="Domain" value=""/>
  <con:entry key="Coverage Report" value="false"/>
  <con:entry key="Export JUnit Results" value="true"/>
  <con:entry key="Open Report" value="false"/>
  <con:entry key="Project Properties" value=""/>
  <con:entry key="Project Password" value=""/>
  <con:entry key="Export All" value="true"/>
  <con:entry key="Report Format(s)" value=""/>
  <con:entry key="TestCase" value="&lt;all>"/>
  <con:entry key="Print Report" value="true"/>
  <con:entry key="Username" value=""/>
  <con:entry key="Root Folder" value="C:\tmp\release"/>
  <con:entry key="Save After" value="false"/>
  <con:entry key="Add Settings" value="false"/>
  <con:entry key="Endpoint" value=""/>
</xml-fragment>]]></con:setting></con:settings><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="getVersion" type="rest" basePath="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://172.17.16.113:8080</con:endpoint><con:endpoint>${#Project#stagingEndpoint}</con:endpoint></con:endpoints><con:resource name=".xml" path="${#Project#path}"><con:settings/><con:parameters/><con:method name="getVersion" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:api="http://docs.rackspacecloud.com/auth/api">api:version</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>500</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/xml</con:mediaType><con:status>500 404</con:status><con:params/><con:element xmlns:v1="http://idm.api.rackspace.com/v1.0">v1:serverError</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/xml</con:mediaType><con:status>404</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:clo="http://localhost/idm/cloud">clo:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Accept" value=".json" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://172.17.16.113:8080</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name=".json" path="${#Project#path}/v1.0"><con:settings/><con:parameters/><con:method name="getVersion" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:json="http://172.17.16.113/.json">json:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>401 500</con:status><con:params/><con:element xmlns:json="http://localhost/idm/cloud/.json">json:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://172.17.16.113:8080</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="v1.0 contract" path=""><con:settings/><con:parameters/><con:resource name="v1.0 contract" path="${#Project#path}/v1.0"><con:settings/><con:parameters/><con:method name="auth v1.0" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/xml</con:mediaType><con:status>401 404</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/xml</con:mediaType><con:status>404</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>204</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>text/xml</con:mediaType><con:status>204</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:endpoint>http://172.17.16.113:8080</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="v1.0.1 direct" path="${#Project#path}/v1.0"><con:settings/><con:parameters/><con:method name="auth v1.0.1 direct" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>204</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml</con:mediaType><con:status>401</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>text/xml</con:mediaType><con:status>204</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:endpoint>http://172.17.16.113:8080</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="auth" path="auth"><con:settings/><con:parameters/><con:method name="auth" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:endpoint>http://172.17.16.113:8080</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:resource><con:resource name="v1.0.2" path="${#Project#path}/v1.0/"><con:settings/><con:parameters/><con:method name="auth v1.0.2" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>302</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/xml</con:mediaType><con:status>401 500 400</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/octet-stream</con:mediaType><con:status>401</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>204</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>204</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>text/xml</con:mediaType><con:status>204</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>401 500</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>500</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/xml</con:mediaType><con:status>401 404</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>400</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:endpoint>http://172.17.16.113:8080</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="v1.0.1" path="auth-server/services/rest/service/auth"><con:settings/><con:parameters/><con:method name="auth v1.0.1" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>204</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>204</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml</con:mediaType><con:status>401</con:status><con:params/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:endpoint>http://172.17.16.113:8080</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:testSuite name="Functional v1.0 redirect"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getListVersion" searchProperties="true" id="e27d942c-37ed-40b8-bd63-27e5a2a9fe2e" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="restrequest" name="getVersion - xml"><con:settings/><con:config service="getVersion" resourcePath="/${#Project#path}" methodName="getVersion" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getVersion - xml" mediaType="application/xml" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#stagingEndpoint}</con:endpoint><con:request/><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>assert messageExchange.responseStatusCode == 200</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" name="XPath Match"><con:configuration><path>declare namespace ns5='http://docs.openstack.org/common/api/v1.0';
//ns5:versions[1]/ns5:version[1]/@status</path><content>DEPRECATED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="XPath Match 1"><con:configuration><path>declare namespace ns5='http://docs.openstack.org/common/api/v1.0';
//ns5:versions[1]/ns5:version[2]/@status</path><content>CURRENT</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="XPath Match 2"><con:configuration><path>declare namespace ns5='http://docs.openstack.org/common/api/v1.0';
//ns5:versions[1]/ns5:version[3]/@status</path><content>CURRENT</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getVersion - json"><con:settings/><con:config service="getVersion" resourcePath="/${#Project#path}" methodName="getVersion" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getVersion - json" mediaType="application/xml" accept="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#stagingEndpoint}</con:endpoint><con:request/><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>assert messageExchange.responseStatusCode == 200</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" name="XPath Match"><con:configuration><path>declare namespace ns1='${#Project#USstaginEndpoint}/${#Project#path}';
//ns1:Response[1]/ns1:versions[1]/ns1:version[1]/ns1:e[1]/ns1:status[1]</path><content>DEPRECATED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="XPath Match 1"><con:configuration><path>declare namespace ns1='${#Project#USstaginEndpoint}/${#Project#path}';
//ns1:Response[1]/ns1:versions[1]/ns1:version[1]/ns1:e[2]/ns1:status[1]</path><content>CURRENT</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="XPath Match 2"><con:configuration><path>declare namespace ns1='${#Project#USstaginEndpoint}/${#Project#path}';
//ns1:Response[1]/ns1:versions[1]/ns1:version[1]/ns1:e[3]/ns1:status[1]</path><content>CURRENT</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="verify list of version and state"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context);
def holder1 = groovyUtils.getXmlHolder("getVersion - xml#Response");
def holder2 = groovyUtils.getXmlHolder("getVersion - json#ResponseAsXml");
//xml
//def response = context.expand( '${getVersion - xml#Response#declare namespace ns1=\'http://docs.openstack.org/common/api/v1.0\'; //ns1:versions[1]/ns1:version[1]/@id}' )

List versionList = holder1.getNodeValues("//ns5:versions[1]/ns5:version/@id")

log.info versionList
log.info versionList.size()

for(item in 0..versionList.size()-1)
{
	//log.info versionList[item]
	def vers = versionList[item]
	testRunner.testCase.setPropertyValue("version", vers)
	def status = context.expand( '${getVersion - xml#Response#declare namespace ns1=\'http://docs.openstack.org/common/api/v1.0\'; //ns1:versions[1]/ns1:version[@id="${#TestCase#version}"]/@status}' )
	log.info "Xml: " +vers + " - " + status
}

//json
//def responseAsXml = context.expand( '${getVersion - json#ResponseAsXml#declare namespace ns1=\'http://172.17.16.113/.json\'; //ns1:Response[1]/ns1:versions[1]/ns1:values[1]/ns1:e[1]/ns1:id[1]}' )

List versionList2 = holder2.getNodeValues("//ns1:Response[1]/ns1:versions[1]/ns1:version[1]/ns1:e/ns1:id")

log.info versionList2
log.info versionList2.size()

for(item in 0..versionList2.size()-1)
{
	//log.info versionList2[item]
	def vers2 = versionList2[item]
	testRunner.testCase.setPropertyValue("jversion", vers2)
	def status2 = context.expand( '${getVersion - json#ResponseAsXml#declare namespace ns1=\'${#Project#stagingEndpoint}/${#Project#path}\'; //ns1:Response[1]/ns1:versions[1]/ns1:version[1]/ns1:e[ns1:id="${#TestCase#jversion}"]/ns1:status}' )
	log.info "Json: " + vers2 + " - " + status2
}



</script></con:config></con:testStep><con:properties><con:property><con:name>version</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">v2.0</con:value></con:property><con:property><con:name>jversion</con:name><con:value>v2.0</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:properties><con:property><con:name>username</con:name><con:value>cmarin1</con:value></con:property><con:property><con:name>key</con:name><con:value/></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="Functional v1.0.2"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="v1.0.2 calls" searchProperties="true" id="fd0aa298-a485-48f9-a1e7-7ecea04497c9" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="restrequest" name="auth v1.0.2 - xml"><con:settings/><con:config service="getVersion" resourcePath="/${#Project#path}/v1.0/" methodName="auth v1.0.2" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="auth v1.0.2 - xml" mediaType="application/xml" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Auth-Key" value="${#TestSuite#key}"/>
  &lt;con:entry key="X-Auth-User" value="${#TestSuite#username}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#stagingEndpoint}</con:endpoint><con:request/><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def status= messageExchange.responseHeaders["#status#"]
log.info status
def server = messageExchange.responseHeaders["Server"]
log.info server
def token = messageExchange.responseHeaders["X-Auth-Token"]
log.info token
def serverUrl = messageExchange.responseHeaders["X-Server-Management-Url"]
log.info serverUrl
def CDNUrl = messageExchange.responseHeaders["X-CDN-Management-Url"]
log.info CDNUrl
def storageUrl = messageExchange.responseHeaders["X-Storage-Url"]
log.info storageUrl
context.testCase.setPropertyValue("X-Auth-Token", token[0])
context.testCase.setPropertyValue("X-Storage-Url", storageUrl[0])
context.testCase.setPropertyValue("X-Server-Management-Url", serverUrl[0])
context.testCase.setPropertyValue("X-CDN-Management-Url", CDNUrl[0])</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>assert messageExchange.responseStatusCode == 204</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion 2"><con:configuration><scriptText>def vary = messageExchange.responseHeaders['vary']
assert vary.contains("X-Auth-Token, X-Auth-Key, X-Storage-User, X-Storage-Pass, X-Auth-User")
</scriptText></con:configuration></con:assertion><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="auth v1.0.2 - json"><con:settings/><con:config service="getVersion" resourcePath="/${#Project#path}/v1.0/" methodName="auth v1.0.2" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="auth v1.0.2 - json" mediaType="application/xml" accept="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Auth-Key" value="${#TestSuite#key}"/>
  &lt;con:entry key="X-Auth-User" value="${#TestSuite#username}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#stagingEndpoint}</con:endpoint><con:request/><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def status= messageExchange.responseHeaders["#status#"]
log.info status
def server = messageExchange.responseHeaders["Server"]
log.info server
def token = messageExchange.responseHeaders["X-Auth-Token"]
log.info token
def serverUrl = messageExchange.responseHeaders["X-Server-Management-Url"]
log.info serverUrl
def CDNUrl = messageExchange.responseHeaders["X-CDN-Management-Url"]
log.info CDNUrl
def storageUrl = messageExchange.responseHeaders["X-Storage-Url"]
log.info storageUrl
context.testCase.setPropertyValue("X-Auth-Token", token[0])
context.testCase.setPropertyValue("X-Storage-Url", storageUrl[0])
context.testCase.setPropertyValue("X-Server-Management-Url", serverUrl[0])
context.testCase.setPropertyValue("X-CDN-Management-Url", CDNUrl[0])</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>assert messageExchange.responseStatusCode == 204</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion 2"><con:configuration><scriptText>def vary = messageExchange.responseHeaders['vary']
assert vary.contains("X-Auth-Token, X-Auth-Key, X-Storage-User, X-Storage-Pass, X-Auth-User")
</scriptText></con:configuration></con:assertion><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="auth v1.0.2 - bad key xml"><con:settings/><con:config service="getVersion" resourcePath="/${#Project#path}/v1.0/" methodName="auth v1.0.2" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="auth v1.0.2 - bad key xml" mediaType="application/xml" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Auth-Key" value="badkey"/>
  &lt;con:entry key="X-Auth-User" value="${#TestSuite#username}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#stagingEndpoint}</con:endpoint><con:request/><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def status= messageExchange.responseHeaders["#status#"]
log.info status
def server = messageExchange.responseHeaders["Server"]
log.info server
def token = messageExchange.responseHeaders["X-Auth-Token"]
log.info token
def serverUrl = messageExchange.responseHeaders["X-Server-Management-Url"]
log.info serverUrl
def CDNUrl = messageExchange.responseHeaders["X-CDN-Management-Url"]
log.info CDNUrl
def storageUrl = messageExchange.responseHeaders["X-Storage-Url"]
log.info storageUrl
</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>assert messageExchange.responseStatusCode == 401</scriptText></con:configuration></con:assertion><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="auth v1.0.2 - no username xml"><con:settings/><con:config service="getVersion" resourcePath="/${#Project#path}/v1.0/" methodName="auth v1.0.2" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="auth v1.0.2 - no username xml" mediaType="application/xml" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Auth-Key" value="${#TestSuite#key}"/>
  &lt;con:entry key="X-Auth-User" value=""/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#stagingEndpoint}</con:endpoint><con:request/><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def status= messageExchange.responseHeaders["#status#"]
log.info status
def server = messageExchange.responseHeaders["Server"]
log.info server
def token = messageExchange.responseHeaders["X-Auth-Token"]
log.info token
def serverUrl = messageExchange.responseHeaders["X-Server-Management-Url"]
log.info serverUrl
def CDNUrl = messageExchange.responseHeaders["X-CDN-Management-Url"]
log.info CDNUrl
def storageUrl = messageExchange.responseHeaders["X-Storage-Url"]
log.info storageUrl
</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>assert messageExchange.responseStatusCode == 401</scriptText></con:configuration></con:assertion><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="auth v1.0.2 - no username and key"><con:settings/><con:config service="getVersion" resourcePath="/${#Project#path}/v1.0/" methodName="auth v1.0.2" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="auth v1.0.2 - no username and key" mediaType="application/xml" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#stagingEndpoint}</con:endpoint><con:request/><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def status= messageExchange.responseHeaders["#status#"]
log.info status
def server = messageExchange.responseHeaders["Server"]
log.info server
def token = messageExchange.responseHeaders["X-Auth-Token"]
log.info token
def serverUrl = messageExchange.responseHeaders["X-Server-Management-Url"]
log.info serverUrl
def CDNUrl = messageExchange.responseHeaders["X-CDN-Management-Url"]
log.info CDNUrl
def storageUrl = messageExchange.responseHeaders["X-Storage-Url"]
log.info storageUrl
context.testCase.setPropertyValue("X-Auth-Token", token)
context.testCase.setPropertyValue("X-Storage-Url", storageUrl)
context.testCase.setPropertyValue("X-Server-Management-Url", serverUrl)
context.testCase.setPropertyValue("X-CDN-Management-Url", CDNUrl)</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>assert messageExchange.responseStatusCode == 401</scriptText></con:configuration></con:assertion><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>X-Auth-Token</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>X-Storage-Url</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>X-Server-Management-Url</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>X-CDN-Management-Url</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/></con:testCase><con:properties><con:property><con:name>key</con:name><con:value>1234567890</con:value></con:property><con:property><con:name>username</con:name><con:value>mkovacs</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:requirements/><con:properties><con:property><con:name>stagingEndpoint</con:name><con:value>https://t-api2.cidm.iad2.corp.rackspace.com:4932</con:value></con:property><con:property><con:name>USstaginEndpoint</con:name><con:value>https://t-api2.cidm.iad2.corp.rackspace.com</con:value></con:property><con:property><con:name>path</con:name><con:value>cloud</con:value></con:property></con:properties><con:wssContainer/><con:databaseConnectionContainer/><con:reporting><con:reportTemplates/><con:xmlTemplates/><con:parameters/></con:reporting></con:soapui-project>