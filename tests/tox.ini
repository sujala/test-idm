[tox]
envlist = py27, flake8

[testenv]
usedevelop = True
setenv = VIRTUAL_ENV={envdir}
         LC_ALL = en_US.UTF-8
         NOSE_WITH_OPENSTACK=1
         NOSE_OPENSTACK_COLOR=1
         NOSE_OPENSTACK_RED=0.05
         NOSE_OPENSTACK_YELLOW=0.025
         NOSE_OPENSTACK_SHOW_ELAPSED=1
         NOSE_OPENSTACK_STDOUT=1
         PYTHONDONTWRITEBYTECODE=1
passenv =
    CAFE_CONFIG_FILE_PATH
    CAFE_ROOT_LOG_PATH
    CAFE_TEST_LOG_PATH
deps = -r{toxinidir}/api/requirements.txt
commands = pip install opencafe==0.3.0
           cafe-config plugins install http
           nosetests --with-xunit --xunit-file=nosetests.xml

[testenv:flake8]
commands = flake8 {toxinidir} --exclude=.tox
